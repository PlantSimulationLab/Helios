<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>.: File Input/Output</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Helios_logo_small.png"/></td>
  <td id="projectalign">
   <div id="projectname">.<span id="projectnumber">&#160;v1.3.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">File Input/Output </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div style="padding:10px;background-color:#FF6666 ;line-height:1.2;"> A very important note with regard to File Input/Output is that all file paths need to be given with respect to the current build directory or as absolute paths. </div><h1><a class="anchor" id="XMLstructure"></a>
XML File Structure</h1>
<p>File input and output is handled using .xml files. See the Wikipedia page for xml for more information on xml files: <a href="https://en.wikipedia.org/wiki/XML">en.wikipedia.org/wiki/XML</a>.</p>
<p>Within Helios, xml files can be used to execute any Context commands that would be issued within a program, for example, adding geometry, adding timeseries, or adding primitive data.</p>
<p>All xml files start with a header indicating the version to be used, and the tag "&lt;helios&gt;...&lt;/helios&gt;" should encapsulate the whole file:</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">helios</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">helios</span>&gt;</div>
</div><!-- fragment --><p>Comments are given in xml files by: </p><div class="fragment"><div class="line"><span class="comment">&lt;!-- this is a comment --&gt;</span></div>
</div><!-- fragment --><h2><a class="anchor" id="PrimXML"></a>
Adding Primitives</h2>
<p>Primitives are added by giving a tag with the primitive type, followed by elements that specify necessary inputs. The table below gives examples of adding each primitive type in an .xml file. Note that the parameters used to specify the primitives are the same as when adding them to the Context via 'add[*]' commands (e.g., addPatch()).</p>
<table class="doxtable">
<tr>
<th>Primitive Type</th><th>Code Sample </th></tr>
<tr>
<td>Patch</td><td><div style="padding:0.5px;background-color:#D0D0D0 ;line-height:1.2;"> <pre><code> &lt;patch&gt;
     &lt;center&gt;0 0 0&lt;/center&gt;
     &lt;size&gt;1 1&lt;/size&gt;
     &lt;rotation&gt;0 0&lt;/rotation&gt; &lt;!-- OPTIONAL --&gt;
     &lt;color&gt;1 0 0&lt;/color&gt; &lt;!-- OPTIONAL --&gt;
     &lt;texture&gt;"grass.jpg"&lt;/texture&gt; &lt;!-- OPTIONAL --&gt;
  &lt;/patch&gt;</code></pre> </div>  </td></tr>
<tr>
<td>Triangle</td><td><div style="padding:0.5px;background-color:#D0D0D0 ;line-height:1.2;"> <pre><code> &lt;triangle&gt;
     &lt;vertex&gt;0 0 0&lt;/vertex&gt;
     &lt;vertex&gt;1 0 0&lt;/vertex&gt;
     &lt;vertex&gt;1 1 0&lt;/vertex&gt;
     &lt;color&gt;1 0 0&lt;/color&gt;
  &lt;/triangle&gt;</code></pre> </div>  </td></tr>
<tr>
<td>Disk</td><td><div style="padding:0.5px;background-color:#D0D0D0 ;line-height:1.2;"> <pre><code> &lt;disk&gt;
     &lt;center&gt;0 0 0&lt;/center&gt;
     &lt;size&gt;1 1&lt;/size&gt;
     &lt;rotation&gt;0 0&lt;/rotation&gt;
     &lt;color&gt;1 0 0&lt;/color&gt;
     &lt;texture&gt;"grass.jpg"&lt;/texture&gt;
  &lt;/disk&gt;</code></pre> </div>  </td></tr>
<tr>
<td>Voxel</td><td><div style="padding:0.5px;background-color:#D0D0D0 ;line-height:1.2;"> <pre><code> &lt;voxel&gt;
     &lt;center&gt;0 0 0&lt;/center&gt;
     &lt;size&gt;1 1 1&lt;/size&gt;
     &lt;color&gt;1 0 0&lt;/color&gt;
  &lt;/voxel&gt;</code></pre> </div>  </td></tr>
</table>
<h2><a class="anchor" id="TimeXML"></a>
Adding Timeseries Data</h2>
<p>Data timeseries are specified by the tag 'timeseries' with the attribute giving the label for the timeseries (e.g., temperature). The 'datapoint' tag is used to specify data points, with elements specifying the time, date, and value. The sample below gives an example of creating a timeseries in an xml file.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">helios</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">timeseries</span> <span class="keyword">label</span>=<span class="stringliteral">&quot;temperature&quot;</span> &gt;</div>
<div class="line">  &lt;<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">date</span>&gt;2 1 2000&lt;/<span class="keywordtype">date</span>&gt; <span class="comment">&lt;!-- 2 Jan. 2000 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">time</span>&gt;0 0 13&lt;/<span class="keywordtype">time</span>&gt; <span class="comment">&lt;!-- 13:00:00 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">value</span>&gt;301.23&lt;/<span class="keywordtype">value</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">date</span>&gt;2 1 2000&lt;/<span class="keywordtype">date</span>&gt; <span class="comment">&lt;!-- 2 Jan. 2000 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">time</span>&gt;13 15 00&lt;/<span class="keywordtype">time</span>&gt; <span class="comment">&lt;!-- 13:15:00 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">value</span>&gt;301.92&lt;/<span class="keywordtype">value</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">date</span>&gt;2 1 2000&lt;/<span class="keywordtype">date</span>&gt; <span class="comment">&lt;!-- 2 Jan. 2000 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">time</span>&gt;13 30 00&lt;/<span class="keywordtype">time</span>&gt; <span class="comment">&lt;!-- 13:30:00 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">value</span>&gt;302.56&lt;/<span class="keywordtype">value</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">date</span>&gt;2 1 2000&lt;/<span class="keywordtype">date</span>&gt; <span class="comment">&lt;!-- 2 Jan. 2000 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">time</span>&gt;13 45 00&lt;/<span class="keywordtype">time</span>&gt; <span class="comment">&lt;!-- 13:45:00 --&gt;</span></div>
<div class="line">    &lt;<span class="keywordtype">value</span>&gt;303.05&lt;/<span class="keywordtype">value</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">datapoint</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">timeseries</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">helios</span>&gt;</div>
</div><!-- fragment --><p>Note that the date can alternatively be specified as a Julian day of year (1-366) using the &lt;dateJulian&gt; tag:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">dateJulian</span>&gt;2 2000&lt;/<span class="keywordtype">dateJulian</span>&gt; <span class="comment">&lt;!-- 2 Jan. 2000, Julian Day = 2 --&gt;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="ASCIItimeseries"></a>
Adding Timeseries (Weather) Data from Tabular Text Files</h1>
<p>If timeseries/weather data is available in a tabular ASCII text file, this can be read directly into the Context to create a timeseries using the <a class="el" href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">helios::Context::loadTabularTimeseriesData()</a> method. The general format for these files is that each column should correspond to each variable (e.g., time, date, temperature, wind speed) and each row should be a different time point. There should be an equal number of columns on every line.</p>
<p>At a minimum, there should be a column specifying the date, which could either be a date string (e.g., 03/10/2023) or Julian day and the year, as well as columns specifying the hour and at least one corresponding data value. The date string can separate values by the '/' or '-' characters (03/10/2023 or 03-10-2023, respectively), and can have different ordering (e.g., YYYYMMDD) which is specified based on an argument to the <a class="el" href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">helios::Context::loadTabularTimeseriesData()</a> method.</p>
<p>There are two ways of specifying the ordering and labels of columns. The first is to specify them in the file header (first line). The second is to specify them manually as an argument to the <a class="el" href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">helios::Context::loadTabularTimeseriesData()</a> method. This can be useful if you want to customize the names of data values without modifying the actual text file.</p>
<p>There are certain column labels that are keywords used by Helios to specify required values such as the date. These are given in the table below. Any other label not contained in the table below will be treated as a variable, whose label in the timeseries will be the given column label.</p>
<table class="doxtable">
<tr>
<th>Column Label</th><th>Description</th><th>Required? </th></tr>
<tr>
<td>year</td><td>Year (YYYY)</td><td>year+DOY -OR- date </td></tr>
<tr>
<td>DOY or Jul</td><td>Day of year starting at Jan. 1 (DOY=1)</td><td>year+DOY -OR- date </td></tr>
<tr>
<td>date</td><td>Date string delimited by '/' or '-' character (default format YYYY-MM-DD)</td><td>year+DOY -OR- date </td></tr>
<tr>
<td>hour</td><td>Hour of the day. Can be specified either as 13 or 1300 (for 1PM example).</td><td>yes </td></tr>
<tr>
<td>minute</td><td>Minute of the hour. If 'hour' above is specified with minute included (e.g., 1315), the minute field will be automatically added.</td><td>no </td></tr>
<tr>
<td>second</td><td>Second of the minute.</td><td>no </td></tr>
</table>
<p>Arguments to the <a class="el" href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">helios::Context::loadTabularTimeseriesData()</a> method:</p>
<ol type="1">
<li>A string specifying the file to be loaded, with path relative to where the executable was run (usually the build directory).</li>
<li>A vector of strings specifying labels for the columns in the file. If an empty vector is specified ('{}'), the labels given in the first line of the file will be used. Otherwise, the length of the vector must match the number of columns in the file.</li>
<li>The delimiter character separating values in each row (e.g., ',').</li>
<li>(optional) The format of the date string used to specify date values (e.g., 'YYYYMMDD', 'MMDDYYYY'; month and day should always be two values, and year should be four values). This is not used if dates are specified using the year and DOY. The default format is 'YYYYMMDD'.</li>
<li>(optional) Number of header lines in the file. By default, headerlines=0.</li>
</ol>
<p>There is a special shortcut for reading <a href="https://cimis.water.ca.gov">CIMIS weather station</a> files. To read these files, simply specify the second argument as a vector of length 1 containing the string "CIMIS" (e.g., {"CIMIS"}), which will automatically set column labels as: '{"", "", "", "date", "hour", "DOY", "ETo", "", "precipitation", "", "net_radiation", "", "vapor_pressure", "", "air_temperature", "", "air_humidity", "", "dew_point", "", "wind_speed", "", "wind_direction", "", "soil_temperature", ""}'. You can specify any delimiter in this case - it will be overridden to be comma delimited.</p>
<p>A code example for generic weather data is given below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">   context.<a class="code hl_function" href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">loadTabularTimeseriesData</a>(<span class="stringliteral">&quot;../input/weatherfile.csv&quot;</span>, {<span class="stringliteral">&quot;date&quot;</span>, <span class="stringliteral">&quot;hour&quot;</span>, <span class="stringliteral">&quot;temperature&quot;</span>}, <span class="stringliteral">&quot;,&quot;</span>, <span class="stringliteral">&quot;MMDDYYYY&quot;</span>, 1);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_struct" href="structhelios_1_1_date.html">Date</a> date = make_Date( 2, 1, 2020 );</div>
<div class="line">   <a class="code hl_struct" href="structhelios_1_1_time.html">Time</a> time = make_Time( 13, 00, 00 );</div>
<div class="line">   <span class="keywordtype">float</span> T = context.<a class="code hl_function" href="group__timeseries.html#ga8845155a8f5df1e6db968b78f5a5fb18">queryTimeseriesData</a>( <span class="stringliteral">&quot;temperature&quot;</span>, date, time );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="a_context_8h_html"><div class="ttname"><a href="_context_8h.html">Context.h</a></div></div>
<div class="ttc" id="aclasshelios_1_1_context_html"><div class="ttname"><a href="classhelios_1_1_context.html">helios::Context</a></div><div class="ttdoc">Stores the state associated with simulation.</div><div class="ttdef"><b>Definition:</b> <a href="_context_8h_source.html#l01682">Context.h:1682</a></div></div>
<div class="ttc" id="aclasshelios_1_1_context_html_a1dc9a0f79be2477c4873755586744e51"><div class="ttname"><a href="classhelios_1_1_context.html#a1dc9a0f79be2477c4873755586744e51">helios::Context::loadTabularTimeseriesData</a></div><div class="ttdeci">void loadTabularTimeseriesData(const std::string &amp;data_file, const std::vector&lt; std::string &gt; &amp;column_labels, const std::string &amp;delimiter, const std::string &amp;date_string_format=&quot;YYYYMMDD&quot;, uint headerlines=0)</div><div class="ttdoc">Load tabular weather data from text file into timeseries.</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l04497">Context_fileIO.cpp:4497</a></div></div>
<div class="ttc" id="agroup__timeseries_html_ga8845155a8f5df1e6db968b78f5a5fb18"><div class="ttname"><a href="group__timeseries.html#ga8845155a8f5df1e6db968b78f5a5fb18">helios::Context::queryTimeseriesData</a></div><div class="ttdeci">float queryTimeseriesData(const char *label, const Date &amp;date, const Time &amp;time) const</div><div class="ttdoc">Get a timeseries data point by specifying a date and time vector.</div><div class="ttdef"><b>Definition:</b> <a href="_context_8cpp_source.html#l01789">Context.cpp:1789</a></div></div>
<div class="ttc" id="astructhelios_1_1_date_html"><div class="ttname"><a href="structhelios_1_1_date.html">helios::Date</a></div><div class="ttdoc">Date vector.</div><div class="ttdef"><b>Definition:</b> <a href="helios__vector__types_8h_source.html#l00996">helios_vector_types.h:996</a></div></div>
<div class="ttc" id="astructhelios_1_1_time_html"><div class="ttname"><a href="structhelios_1_1_time.html">helios::Time</a></div><div class="ttdoc">Time vector.</div><div class="ttdef"><b>Definition:</b> <a href="helios__vector__types_8h_source.html#l01168">helios_vector_types.h:1168</a></div></div>
</div><!-- fragment --><p>The above example would read the comma-delimited file "../input/weatherfile.csv". Timeseries data would be added to the Context for values of "temperature", which could be queried based on this label.</p>
<h1><a class="anchor" id="XMLread"></a>
Reading XML Files</h1>
<p>XML files can be read by the Context via the function loadXML(). This function parses the XML file and adds all specified structures (see above) to the Context. Below is an example of how to load an XML file into the Context. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">   context.<a class="code hl_function" href="classhelios_1_1_context.html#a129516a8fce035705a541e7b877eba2f">loadXML</a>( <span class="stringliteral">&quot;file.xml&quot;</span> );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_a129516a8fce035705a541e7b877eba2f"><div class="ttname"><a href="classhelios_1_1_context.html#a129516a8fce035705a541e7b877eba2f">helios::Context::loadXML</a></div><div class="ttdeci">std::vector&lt; uint &gt; loadXML(const char *filename, bool quiet=false)</div><div class="ttdoc">Load inputs specified in an XML file.</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l01217">Context_fileIO.cpp:1217</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="Poly"></a>
Reading Standard Polygon File Formats</h1>
<h2><a class="anchor" id="PLYread"></a>
Reading PLY (Stanford Polygon) Files</h2>
<p>The Context can automatically import Stanford .ply files <a href="https://en.wikipedia.org/wiki/PLY_(file_format)">en.wikipedia.org/wiki/PLY_(file_format)</a>. This is accomplished via the loadPLY() command, as illustrated below. There are several overloaded versions of this function, which allow for various modifications to the PLY model.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// location where PLY model will be centered</span></div>
<div class="line">    <a class="code hl_struct" href="structhelios_1_1vec3.html">vec3</a> origin(0,0,0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// scaling factor to apply to model</span></div>
<div class="line">    <span class="keywordtype">float</span> scale = 1.0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// rotation to apply to model (optional argument to loadPLY)</span></div>
<div class="line">    <a class="code hl_struct" href="structhelios_1_1_spherical_coord.html">SphericalCoord</a> rotation( 0., M_PI );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// default color for model (optional argument to loadPLY)</span></div>
<div class="line">    <a class="code hl_struct" href="structhelios_1_1_r_g_bcolor.html">RGBcolor</a> color = RGB::red;</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#a116724929091eabd6324047ed66cef85">loadPLY</a>( <span class="stringliteral">&quot;file.ply&quot;</span>, origin, scale, rotation, color );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_a116724929091eabd6324047ed66cef85"><div class="ttname"><a href="classhelios_1_1_context.html#a116724929091eabd6324047ed66cef85">helios::Context::loadPLY</a></div><div class="ttdeci">std::vector&lt; uint &gt; loadPLY(const char *filename, bool silent=false)</div><div class="ttdoc">Load geometry contained in a Stanford polygon file (.ply). Model will be placed at the origin with no...</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l03330">Context_fileIO.cpp:3330</a></div></div>
<div class="ttc" id="astructhelios_1_1_r_g_bcolor_html"><div class="ttname"><a href="structhelios_1_1_r_g_bcolor.html">helios::RGBcolor</a></div><div class="ttdoc">R-G-B color vector.</div><div class="ttdef"><b>Definition:</b> <a href="helios__vector__types_8h_source.html#l00704">helios_vector_types.h:704</a></div></div>
<div class="ttc" id="astructhelios_1_1_spherical_coord_html"><div class="ttname"><a href="structhelios_1_1_spherical_coord.html">helios::SphericalCoord</a></div><div class="ttdoc">Vector of spherical coordinates (elevation,azimuth)</div><div class="ttdef"><b>Definition:</b> <a href="helios__vector__types_8h_source.html#l01268">helios_vector_types.h:1268</a></div></div>
<div class="ttc" id="astructhelios_1_1vec3_html"><div class="ttname"><a href="structhelios_1_1vec3.html">helios::vec3</a></div><div class="ttdoc">Vector of three elements of type 'float'.</div><div class="ttdef"><b>Definition:</b> <a href="helios__vector__types_8h_source.html#l00414">helios_vector_types.h:414</a></div></div>
</div><!-- fragment --><p>There are other forms of the loadPLY function that allow for translation, rotation, and scaling of the entire PLY model.</p>
<p>Different applications may utilize different coordinate axes in .ply files. In computer graphics applications, it is common to define the y-axis as the up direction. Helios uses a z-up coordinate system. By default <a class="el" href="classhelios_1_1_context.html#a116724929091eabd6324047ed66cef85">helios::Context::loadPLY()</a> assumes that the coordinate system used when creating the .ply file is y-up. There is an optional argument <a class="el" href="classhelios_1_1_context.html#a116724929091eabd6324047ed66cef85">helios::Context::loadPLY()</a> that can allow you to easily define the up-axis.</p>
<p>The Blender software package (<a href="https://www.blender.org">www.blender.org</a>) can easily modify and convert most polygon file formats to .ply format. <a class="el" href="_convert_p_l_y.html">This page</a> gives a tutorial on how to perform such conversions using Blender.</p>
<h2><a class="anchor" id="OBJread"></a>
Reading OBJ (Wavefront) Files</h2>
<p>Helios can read <a href="https://en.wikipedia.org/wiki/Wavefront_.obj_file">Wavefront (.obj)</a> files and associated material (.mtl) files. Not all features of .obj files are applicable to Helios, and thus some features are not supported. Supported features are:</p>
<ul>
<li>Geometric vertex coordinates (x,y,z)</li>
<li>Vertex texture coordinates (u,v)</li>
<li>Texture map image files (.jpg, .png) associated with materials</li>
<li>Object groups. When the 'o groupname' is added before a set of vertices, primitive data called 'object_label' is written for the resulting set of primitives.</li>
</ul>
<p>Wavefront files are loaded via the <a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ()</a> function, which takes the name of an .obj file. If the file defines materials and lists an associated material (.mtl) file, the code looks in one of two places for the file. First, if an absolute or relative path is given for the .mtl file name, the file is simply loaded from that location. If only a file name is given for the .mtl file, the directory where the original .obj file was found is searched for the .mtl file.</p>
<p>All aspects of material files are not supported. Helios simply searches for the "Kd" texture map, and uses that to color the primitives.</p>
<p>The <a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ()</a> function requires inputs that scale the model to achieve a certain size of the model, and apply a rotation to the model. There are multiple overloaded versions of this function (listed below) that allow specification of these aspects differently.</p>
<table class="doxtable">
<tr>
<th>Function</th><th>Description </th></tr>
<tr>
<td><a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ</a>( const char* filename, const vec3 &amp;origin, float height, const SphericalCoord &amp;rotation, const RGBcolor &amp;default_color, bool silent=false )</td><td>Load the model and translate it to the location 'origin', scale to have a height of 'height' (set height=0 to apply no scaling), and apply spherical rotation of 'rotation'. </td></tr>
<tr>
<td><a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ</a>( const char* filename, const vec3 &amp;origin, float height, const SphericalCoord &amp;rotation, const RGBcolor &amp;default_color, const char* upaxis, bool silent=false )</td><td>Same as above, except specify the 'up axis' of the model ('XUP', 'YUP', or 'ZUP'). Some 3D modeling software uses a different default axis corresponding to the up direction (e.g., computer graphics software commonly uses 'y' as the up direction). </td></tr>
<tr>
<td><a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ</a>( const char* filename, const vec3 &amp;origin, const vec3 &amp;scale, const SphericalCoord &amp;rotation, const RGBcolor &amp;default_color, const char* upaxis, bool silent=false )</td><td>Same as above, except a scaling factor is applied to the model in the x-, y-, and z-directions based on the value of 'scale' (if scale.x=scale.y=scale.z=0, no scaling is applied). </td></tr>
</table>
<p>The last optional argument to the <a class="el" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ()</a> function allows the user to disable any messages output from the function while loading by setting silent=true.</p>
<p>Example code is given below to load an OBJ model at the origin with no scaling (height=0) or rotation (rotation='nullrotation') applied and default up axis of "z".</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">   context.<a class="code hl_function" href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">loadOBJ</a>(<span class="stringliteral">&quot;relative/path/to/someobjfile.obj&quot;</span>, make_vec3(0,0,0), 0, nullrotation, RGB::red );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_a8657240a0b2926e8c73b083f0fdc339d"><div class="ttname"><a href="classhelios_1_1_context.html#a8657240a0b2926e8c73b083f0fdc339d">helios::Context::loadOBJ</a></div><div class="ttdeci">std::vector&lt; uint &gt; loadOBJ(const char *filename, bool silent=false)</div><div class="ttdoc">Load geometry contained in a Wavefront OBJ file (.obj). Model will be placed at the origin without an...</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l03694">Context_fileIO.cpp:3694</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="PLYwrite"></a>
Writing PLY (Stanford Polygon) Files</h2>
<p>The Context has analogous files for writing PLY files based on the geometry currently loaded in the Context. This is accomplished via the writePLY() command, as illustrated below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="group__primitives.html#gaf4aec42f3f104b7c71150577ef129659">addPatch</a>();</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#aa47b8b6f8cefb3c9d55a3cda10d851d7">writePLY</a>( <span class="stringliteral">&quot;file.ply&quot;</span> );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_aa47b8b6f8cefb3c9d55a3cda10d851d7"><div class="ttname"><a href="classhelios_1_1_context.html#aa47b8b6f8cefb3c9d55a3cda10d851d7">helios::Context::writePLY</a></div><div class="ttdeci">void writePLY(const char *filename) const</div><div class="ttdoc">Write geometry in the Context to a Stanford polygon file (.ply)</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l03630">Context_fileIO.cpp:3630</a></div></div>
<div class="ttc" id="agroup__primitives_html_gaf4aec42f3f104b7c71150577ef129659"><div class="ttname"><a href="group__primitives.html#gaf4aec42f3f104b7c71150577ef129659">helios::Context::addPatch</a></div><div class="ttdeci">uint addPatch()</div><div class="ttdoc">Add new default Patch geometric primitive, which is centered at the origin (0,0,0),...</div><div class="ttdef"><b>Definition:</b> <a href="_context_8cpp_source.html#l01145">Context.cpp:1145</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="OBJwrite"></a>
Writing OBJ (Wavefront) Files</h2>
<p>Writing Wavefront OBJ files is similar to writing a PLY file, except that it will produce both a .obj file containing the geometry, and a .mtl file defining materials (colors, texture masks). For this reason, only the base file name with no extension is provided to the function.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="group__primitives.html#gaf4aec42f3f104b7c71150577ef129659">addPatch</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This will produce two files: &quot;file.obj&quot; and &quot;file.mtl&quot;</span></div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#a8249b03fa781c9382863b7cf2caf0dd8">writeOBJ</a>( <span class="stringliteral">&quot;file&quot;</span> );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_a8249b03fa781c9382863b7cf2caf0dd8"><div class="ttname"><a href="classhelios_1_1_context.html#a8249b03fa781c9382863b7cf2caf0dd8">helios::Context::writeOBJ</a></div><div class="ttdeci">void writeOBJ(const std::string &amp;filename) const</div><div class="ttdoc">Write geometry in the Context to a Wavefront file (.obj)</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l04083">Context_fileIO.cpp:4083</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="Export"></a>
Exporting Project to XML File Format</h1>
<p>All geometry and global/primitive data loaded into the Context can be written to an XML file using the writeXML() function, which can be later read back in using the loadXML(). This functionality can be used to save progress during a simulation run, or to ensure that consistent geometry is always used across simulation runs, among other things.</p>
<p>An XML file can be written as follows:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    uint UUID = context.<a class="code hl_function" href="group__primitives.html#gaf4aec42f3f104b7c71150577ef129659">addPatch</a>();</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#ac7677094a3bbcb62506ce461d982af1d">setPrimitiveData</a>( UUID, <span class="stringliteral">&quot;somedata&quot;</span>, 10.2f );</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#abfcac5a56c13e86298609ed3fccf354d">writeXML</a>( <span class="stringliteral">&quot;file.xml&quot;</span> );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_abfcac5a56c13e86298609ed3fccf354d"><div class="ttname"><a href="classhelios_1_1_context.html#abfcac5a56c13e86298609ed3fccf354d">helios::Context::writeXML</a></div><div class="ttdeci">void writeXML(const char *filename, bool quiet=false) const</div><div class="ttdoc">Write Context geometry and data to XML file for all UUIDs in the context.</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l02618">Context_fileIO.cpp:2618</a></div></div>
<div class="ttc" id="aclasshelios_1_1_context_html_ac7677094a3bbcb62506ce461d982af1d"><div class="ttname"><a href="classhelios_1_1_context.html#ac7677094a3bbcb62506ce461d982af1d">helios::Context::setPrimitiveData</a></div><div class="ttdeci">void setPrimitiveData(const uint &amp;UUID, const char *label, const int &amp;data)</div><div class="ttdoc">Add data value (int) associated with a primitive element.</div><div class="ttdef"><b>Definition:</b> <a href="_context__data_8cpp_source.html#l00710">Context_data.cpp:710</a></div></div>
</div><!-- fragment --><p>and later read back into a new simulation:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The context will now contain a default patch, with primitive data &quot;somedata&quot; equal to 10.2</span></div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#a129516a8fce035705a541e7b877eba2f">loadXML</a>( <span class="stringliteral">&quot;file.xml&quot;</span> );</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="ExportASCII"></a>
Exporting Primitive Data to Text File</h1>
<p>It is often useful to be able to write primitive data to an ASCII text file for analysis in 3rd party software. This can be accomplished using the <a class="el" href="classhelios_1_1_context.html#ab643fc787ea7b1a215605c369f446844">helios::Context::writePrimitiveData()</a> function. Each row of the resulting file will correspond to each primitive, and each column corresponds to different primitive data values. The user must specify which primitive data fields to write to each column in the file. If requested primitive data does not exist for one or more primitives, a default value of 0 will be written and a warning will be issued.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_context_8h.html">Context.h</a>&quot;</span></div>
<div class="line"><span class="keyword">using namespace </span>helios;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(){</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classhelios_1_1_context.html">Context</a> context;</div>
<div class="line"> </div>
<div class="line">    uint UUID = context.<a class="code hl_function" href="group__primitives.html#gaf4aec42f3f104b7c71150577ef129659">addPatch</a>();</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#ac7677094a3bbcb62506ce461d982af1d">setPrimitiveData</a>( UUID, <span class="stringliteral">&quot;somedata&quot;</span>, 10.2f );</div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#ac7677094a3bbcb62506ce461d982af1d">setPrimitiveData</a>( UUID, <span class="stringliteral">&quot;otherdata&quot;</span>, 5 );</div>
<div class="line"> </div>
<div class="line">    std::string columns{<span class="stringliteral">&quot;somedata&quot;</span>,<span class="stringliteral">&quot;otherdata&quot;</span>};</div>
<div class="line"> </div>
<div class="line">    context.<a class="code hl_function" href="classhelios_1_1_context.html#ab643fc787ea7b1a215605c369f446844">writePrimitiveData</a>( <span class="stringliteral">&quot;file.txt&quot;</span>, columns );</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclasshelios_1_1_context_html_ab643fc787ea7b1a215605c369f446844"><div class="ttname"><a href="classhelios_1_1_context.html#ab643fc787ea7b1a215605c369f446844">helios::Context::writePrimitiveData</a></div><div class="ttdeci">void writePrimitiveData(std::string filename, const std::vector&lt; std::string &gt; &amp;column_format, bool print_header=false) const</div><div class="ttdoc">Write primitive data to an ASCII text file for all primitives in the Context.</div><div class="ttdef"><b>Definition:</b> <a href="_context__file_i_o_8cpp_source.html#l04418">Context_fileIO.cpp:4418</a></div></div>
</div><!-- fragment --><p>By default, column header labels will not be written, but if the optional third argument is set as "true" the label of the primitive data for each column will be written to the first line of the file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
