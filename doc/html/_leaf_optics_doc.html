<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Helios: Leaf Optics Plugin Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph_link.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
  DoxygenAwesomeParagraphLink.init()
  DoxygenAwesomeTabs.init()
  DoxygenAwesomeInteractiveToc.init()
</script>
<script>
    try {
        // Remove the stored “last visited page” so the tree always starts fresh
        Cookie.eraseSetting('navpath');
        localStorage.removeItem('navpath');
        // Older Doxygen versions might use this key:
        localStorage.removeItem('nav-sync-path');
    } catch(e) {
        /* storage unavailable? ignore */
    }
</script>
<script type="text/javascript" src="navsync-default.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-93BB4673PE"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-93BB4673PE');
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3F0Y5Z6543"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-3F0Y5Z6543');
</script>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="5">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Helios_logo_small.png"></td>
  <td id="projectalign">
   <div id="projectname">
       <span id="projectnumber">&#160;v1.3.39</span>
   </div>
  </td>
     <td id="searchbox-container">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_leaf_optics_doc.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Leaf Optics Plugin Documentation</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#LOIntro">Introduction</a>
  </li>
  <li class="level1">
    <a href="#LOConstructor">LeafOptics Class Constructor</a>
  </li>
  <li class="level1">
    <a href="#LOProps">LeafOpticsProperties Structure</a>
  </li>
  <li class="level1">
    <a href="#LOUse">Using the LeafOptics Plug-in</a>
  </li>
</ul>
</div>
<div class="textblock"><p><br  />
<br  />
 </p>
<table class="doxtable">
<tr>
<th>Dependencies</th><td>None </td></tr>
<tr>
<th>CMakeLists.txt</th><td>set( PLUGINS "leafoptics" ) </td></tr>
<tr>
<th>Header File</th><td>include "LeafOptics.h" </td></tr>
<tr>
<th>Class</th><td><a class="el" href="class_leaf_optics.html">LeafOptics</a> </td></tr>
</table>
<h1><a class="anchor" id="LOIntro"></a>
Introduction</h1>
<p>This plug-in computes leaf spectral reflectance and transmittance using the PROSPECT family of models. The implementation follows the <a href="https://doi.org/10.1016/j.rse.2017.08.004">PROSPECT&ndash;PRO</a> formulation with eight absorbing constituents and a structural parameter \(N\) that represents the number of elementary layers in the leaf. Output spectra cover the range 400&ndash;2500&#160;nm in 1&#160;nm steps.</p>
<p>For each wavelength \(\lambda\) the absorption coefficient of a single layer is calculated as  </p><p class="formulaDsp">
\[ k(\lambda)=\frac{C_{ab}a_{ab}(\lambda)+C_{ar}a_{ar}(\lambda)+C_{an}a_{an}(\lambda)+C_{br}a_{br}(\lambda)
+C_{w}a_{w}(\lambda)+C_{m}a_{m}(\lambda)+C_{p}a_{p}(\lambda)+C_{c}a_{c}(\lambda)}{N}, \]
</p>
<p> where the \(C\) variables are the constituent masses per area and the \(a(\lambda)\) terms are the specific absorption coefficients loaded from the internal spectral library. Fresnel equations are used to compute surface reflectance and a radiative transfer solution gives the total leaf reflectance and transmittance.</p>
<h1><a class="anchor" id="LOConstructor"></a>
LeafOptics Class Constructor</h1>
<table class="doxtable">
<tr>
<th>Constructors </th></tr>
<tr>
<td><a class="el" href="class_leaf_optics.html#a8f286671c723166c8aae098d0efd9b04">LeafOptics::LeafOptics( helios::Context* context )</a> </td></tr>
</table>
<p>The constructor simply stores a pointer to the Helios context and loads the spectral library data required by the model.</p>
<h1><a class="anchor" id="LOProps"></a>
LeafOpticsProperties Structure</h1>
<p>The <a class="el" href="struct_leaf_optics_properties.html">LeafOpticsProperties</a> structure stores the biochemical inputs to the model.</p>
<table class="doxtable">
<tr>
<th>Member</th><th>Units</th><th>Description</th><th>Default Value </th></tr>
<tr>
<td>numberlayers</td><td>unitless</td><td>Leaf structure parameter \(N\)</td><td>1.5 </td></tr>
<tr>
<td>brownpigments</td><td>unitless</td><td>Mass of brown pigments</td><td>0 </td></tr>
<tr>
<td>chlorophyllcontent</td><td>\(\mu\)g&#160;cm \(^{-2}\)</td><td>Total chlorophyll</td><td>30 </td></tr>
<tr>
<td>carotenoidcontent</td><td>\(\mu\)g&#160;cm \(^{-2}\)</td><td>Total carotenoids</td><td>7 </td></tr>
<tr>
<td>anthocyancontent</td><td>\(\mu\)g&#160;cm \(^{-2}\)</td><td>Anthocyanins</td><td>1 </td></tr>
<tr>
<td>watermass</td><td>g&#160;cm \(^{-2}\)</td><td>Equivalent water thickness</td><td>0.015 </td></tr>
<tr>
<td>drymass</td><td>g&#160;cm \(^{-2}\)</td><td>Dry matter mass</td><td>0.09 </td></tr>
<tr>
<td>protein</td><td>g&#160;cm \(^{-2}\)</td><td>Protein mass</td><td>0 </td></tr>
<tr>
<td>carbonconstituents</td><td>g&#160;cm \(^{-2}\)</td><td>Cellulose and other carbon compounds</td><td>0 </td></tr>
</table>
<h1><a class="anchor" id="LOUse"></a>
Using the LeafOptics Plug-in</h1>
<p>The model can be run to produce global spectra and, optionally, assign those spectra and optical properties to a set of primitives.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_leaf_optics_8h.html">LeafOptics.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">Context context;</div>
<div class="line"><a class="code hl_class" href="class_leaf_optics.html">LeafOptics</a> leafoptics( &amp;context );</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_leaf_optics_properties.html" title="LeafOptics model class.">LeafOpticsProperties</a> props;</div>
<div class="line">props.chlorophyllcontent = 40.0f;</div>
<div class="line">props.watermass = 0.02f;</div>
<div class="line"> </div>
<div class="line">std::vector&lt;uint&gt; leafIDs = ...; <span class="comment">//UUIDs for leaf primitives</span></div>
<div class="line">leafoptics.run( leafIDs, props, <span class="stringliteral">&quot;example&quot;</span> );</div>
</div><!-- fragment --><p>This command creates global data labeled "leaf_reflectivity_example" and "leaf_transmissivity_example" containing the computed spectra. The spectra labels are also stored as primitive data for the specified UUIDs together with the biochemical property values. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
